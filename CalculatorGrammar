grammar Calculator;

@imp {
import java.lang.StringBuilder;
}

@tokens {
LP: "[(]";
RP: "[)]";
PLUS: "\\+" ;
MINUS:  "-" ;
MUL: "\\*";
NUMBER: "[1-9]+[0-9]*";
SPACE: "[ \n\r]+" -> skip;
}

@start = E;

@states {
E[int x] : T G;
G[int y, long k] : EPS #k = 17;# | PLUS T [k, y] #k = y# G | MINUS T G;
T[int z] : F H;
H[int f, int e] : EPS | MUL F H;
F : NUMBER | MINUS F | LP E RP;
}